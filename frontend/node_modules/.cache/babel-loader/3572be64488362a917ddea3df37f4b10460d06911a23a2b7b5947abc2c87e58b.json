{"ast":null,"code":"var _jsxFileName = \"/Users/jerry/spotify-ai/src/components/Callback.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport axios from 'axios';\nimport { useSpotifyAuth } from './SpotifyAuthContext';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Callback = () => {\n  _s();\n  const {\n    setAccessToken\n  } = useSpotifyAuth(); // Use the context to set the access token\n  const navigate = useNavigate(); // Hook for navigation\n\n  useEffect(() => {\n    const code = new URLSearchParams(window.location.search).get('code');\n    if (code) {\n      exchangeCodeForToken(code);\n    }\n  }, []);\n  const exchangeCodeForToken = async code => {\n    try {\n      const response = await axios.post('https://accounts.spotify.com/api/token', new URLSearchParams({\n        grant_type: 'authorization_code',\n        code: code,\n        redirect_uri: process.env.REACT_APP_SPOTIFY_REDIRECT_URI,\n        client_id: process.env.REACT_APP_SPOTIFY_CLIENT_ID,\n        client_secret: process.env.REACT_APP_SPOTIFY_CLIENT_SECRET // Note: Only for testing\n      }), {\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        }\n      });\n      const {\n        access_token\n      } = response.data;\n      setAccessToken(access_token); // Set the access token in the context\n      navigate('/'); // Redirect to home or another page after successful login\n    } catch (error) {\n      console.error('Error exchanging code for token', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n};\n_s(Callback, \"GegwmbAAxUXv4eBCqzZY7ghSX5E=\", false, function () {\n  return [useSpotifyAuth, useNavigate];\n});\n_c = Callback;\nexport default Callback;\nvar _c;\n$RefreshReg$(_c, \"Callback\");","map":{"version":3,"names":["React","useEffect","axios","useSpotifyAuth","useNavigate","jsxDEV","_jsxDEV","Callback","_s","setAccessToken","navigate","code","URLSearchParams","window","location","search","get","exchangeCodeForToken","response","post","grant_type","redirect_uri","process","env","REACT_APP_SPOTIFY_REDIRECT_URI","client_id","REACT_APP_SPOTIFY_CLIENT_ID","client_secret","REACT_APP_SPOTIFY_CLIENT_SECRET","headers","access_token","data","error","console","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/jerry/spotify-ai/src/components/Callback.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport axios from 'axios';\nimport { useSpotifyAuth } from './SpotifyAuthContext';\nimport { useNavigate } from 'react-router-dom';\n\nconst Callback = () => {\n  const { setAccessToken } = useSpotifyAuth(); // Use the context to set the access token\n  const navigate = useNavigate(); // Hook for navigation\n\n  useEffect(() => {\n    const code = new URLSearchParams(window.location.search).get('code');\n\n    if (code) {\n      exchangeCodeForToken(code);\n    }\n  }, []);\n\n  const exchangeCodeForToken = async (code) => {\n    try {\n      const response = await axios.post('https://accounts.spotify.com/api/token', new URLSearchParams({\n        grant_type: 'authorization_code',\n        code: code,\n        redirect_uri: process.env.REACT_APP_SPOTIFY_REDIRECT_URI,\n        client_id: process.env.REACT_APP_SPOTIFY_CLIENT_ID,\n        client_secret: process.env.REACT_APP_SPOTIFY_CLIENT_SECRET, // Note: Only for testing\n      }), {\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n        },\n      });\n\n      const { access_token } = response.data;\n      setAccessToken(access_token); // Set the access token in the context\n      navigate('/'); // Redirect to home or another page after successful login\n    } catch (error) {\n      console.error('Error exchanging code for token', error);\n    }\n  };\n\n  return (\n    <div>\n      Loading...\n    </div>\n  );\n};\n\nexport default Callback;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,cAAc,QAAQ,sBAAsB;AACrD,SAASC,WAAW,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE/C,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACrB,MAAM;IAAEC;EAAe,CAAC,GAAGN,cAAc,CAAC,CAAC,CAAC,CAAC;EAC7C,MAAMO,QAAQ,GAAGN,WAAW,CAAC,CAAC,CAAC,CAAC;;EAEhCH,SAAS,CAAC,MAAM;IACd,MAAMU,IAAI,GAAG,IAAIC,eAAe,CAACC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAACC,GAAG,CAAC,MAAM,CAAC;IAEpE,IAAIL,IAAI,EAAE;MACRM,oBAAoB,CAACN,IAAI,CAAC;IAC5B;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMM,oBAAoB,GAAG,MAAON,IAAI,IAAK;IAC3C,IAAI;MACF,MAAMO,QAAQ,GAAG,MAAMhB,KAAK,CAACiB,IAAI,CAAC,wCAAwC,EAAE,IAAIP,eAAe,CAAC;QAC9FQ,UAAU,EAAE,oBAAoB;QAChCT,IAAI,EAAEA,IAAI;QACVU,YAAY,EAAEC,OAAO,CAACC,GAAG,CAACC,8BAA8B;QACxDC,SAAS,EAAEH,OAAO,CAACC,GAAG,CAACG,2BAA2B;QAClDC,aAAa,EAAEL,OAAO,CAACC,GAAG,CAACK,+BAA+B,CAAE;MAC9D,CAAC,CAAC,EAAE;QACFC,OAAO,EAAE;UACP,cAAc,EAAE;QAClB;MACF,CAAC,CAAC;MAEF,MAAM;QAAEC;MAAa,CAAC,GAAGZ,QAAQ,CAACa,IAAI;MACtCtB,cAAc,CAACqB,YAAY,CAAC,CAAC,CAAC;MAC9BpB,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;IACjB,CAAC,CAAC,OAAOsB,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;IACzD;EACF,CAAC;EAED,oBACE1B,OAAA;IAAA4B,QAAA,EAAK;EAEL;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;AAEV,CAAC;AAAC9B,EAAA,CAvCID,QAAQ;EAAA,QACeJ,cAAc,EACxBC,WAAW;AAAA;AAAAmC,EAAA,GAFxBhC,QAAQ;AAyCd,eAAeA,QAAQ;AAAC,IAAAgC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}